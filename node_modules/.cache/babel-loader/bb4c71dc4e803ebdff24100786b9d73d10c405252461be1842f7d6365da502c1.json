{"ast":null,"code":"import _defineProperty from\"C:/Users/urdan/reedit_myversion/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/Users/urdan/reedit_myversion/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/urdan/reedit_myversion/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import{createSelector}from'@reduxjs/toolkit';// async thunk func that requests posts by topic from www.reedit.com and returns a \n// Js promise, the posts by topic\nexport var fetchPostsbyTopic=createAsyncThunk('posts/getPostsbyTopic',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(topic){var baseUrl,response,jsonResponse,posts;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:baseUrl='https://www.reddit.com';_context.prev=1;_context.next=4;return fetch(\"\".concat(baseUrl).concat(topic,\".json\"));case 4:response=_context.sent;if(!response.ok){_context.next=14;break;}_context.next=8;return response.json();case 8:jsonResponse=_context.sent;posts=[];posts=jsonResponse.data.children.map(function(post){return post.data;});console.log(\"posts:\");console.log(posts);return _context.abrupt(\"return\",posts);case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 19:case\"end\":return _context.stop();}},_callee,null,[[1,16]]);}));return function(_x){return _ref.apply(this,arguments);};}());// the slice for the posts state\nexport var postsSlice=createSlice({name:'posts',initialState:{posts:[],isLoading:false,hasError:false,selectedTopic:'/r/Home/',searchTerm:''},reducers:{setSelectedTopic:function setSelectedTopic(state,action){state.selectedTopic=action.payload;},setSearchTerm:function setSearchTerm(state,action){state.searchTerm=action.payload;}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,fetchPostsbyTopic.pending,function(state,action){state.isLoading=true;state.hasError=false;}),_defineProperty(_extraReducers,fetchPostsbyTopic.fulfilled,function(state,action){state.posts=action.payload;state.isLoading=false;state.hasError=false;}),_defineProperty(_extraReducers,fetchPostsbyTopic.rejected,function(state,action){state.isLoading=false;state.hasError=true;}),_extraReducers)});// .selectedTopic state selector\nexport var selectSelectedTopic=function selectSelectedTopic(state){return state.posts.selectedTopic;};export var selectFilteredSelectedTopic=function selectFilteredSelectedTopic(state){var selectedTopic=selectSelectedTopic(state);return selectedTopic;};// .hasError state selector\nexport var selectHasError=function selectHasError(state){return state.posts.hasError;};export var selectFilteredHasError=function selectFilteredHasError(state){var hasError=selectHasError(state);return hasError;};// .searchTerm state selector\nexport var selectSearchTerm=function selectSearchTerm(state){return state.posts.searchTerm;};export var selectFilteredSearchTerm=function selectFilteredSearchTerm(state){var searchTerm=selectSearchTerm(state);return searchTerm;};// .posts state selector\nexport var selectPosts=function selectPosts(state){return state.posts.posts;};export var selectFilteredPosts=createSelector([selectPosts,selectSearchTerm],function(posts,searchTerm){if(searchTerm!==''){return posts.filter(function(post){return post.title.toLowerCase().includes(searchTerm.toLowerCase());});}return posts;});// export actions an reducer\nvar _postsSlice$actions=postsSlice.actions,setSelectedTopic=_postsSlice$actions.setSelectedTopic,setSearchTerm=_postsSlice$actions.setSearchTerm;export{setSelectedTopic,setSearchTerm};export default postsSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","createSelector","fetchPostsbyTopic","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","topic","baseUrl","response","jsonResponse","posts","wrap","_callee$","_context","prev","next","fetch","concat","sent","ok","json","data","children","map","post","console","log","abrupt","t0","stop","_x","apply","arguments","postsSlice","name","initialState","isLoading","hasError","selectedTopic","searchTerm","reducers","setSelectedTopic","state","action","payload","setSearchTerm","extraReducers","_extraReducers","_defineProperty","pending","fulfilled","rejected","selectSelectedTopic","selectFilteredSelectedTopic","selectHasError","selectFilteredHasError","selectSearchTerm","selectFilteredSearchTerm","selectPosts","selectFilteredPosts","filter","title","toLowerCase","includes","_postsSlice$actions","actions","reducer"],"sources":["C:/Users/urdan/reedit_myversion/src/features/postsSlice.js"],"sourcesContent":["import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\r\nimport { createSelector } from '@reduxjs/toolkit';\r\n\r\n// async thunk func that requests posts by topic from www.reedit.com and returns a \r\n// Js promise, the posts by topic\r\nexport const fetchPostsbyTopic = createAsyncThunk(\r\n  'posts/getPostsbyTopic',\r\n  async(topic) =>{\r\n    const baseUrl = 'https://www.reddit.com';\r\n\r\n    try{\r\n      // topic represents the url, ex home: /r/Home/\r\n      const response = await fetch(`${baseUrl}${topic}.json`);\r\n      if(response.ok){\r\n        const jsonResponse = await response.json();\r\n\r\n        let posts = [];\r\n        posts = jsonResponse.data.children.map((post)=> post.data);\r\n        console.log(\"posts:\");\r\n        console.log(posts);\r\n        return posts;\r\n      }\r\n    }catch (error){\r\n      console.log(error);\r\n    }\r\n  }\r\n)\r\n\r\n// the slice for the posts state\r\nexport const postsSlice = createSlice({\r\n  name: 'posts',\r\n  initialState:{\r\n    posts: [],\r\n    isLoading: false,\r\n    hasError: false,\r\n    selectedTopic: '/r/Home/',\r\n    searchTerm: ''\r\n  },\r\n  reducers: {\r\n    setSelectedTopic: (state, action) =>{\r\n      state.selectedTopic = action.payload;\r\n    },\r\n    setSearchTerm:(state, action) =>{\r\n    state.searchTerm = action.payload;\r\n    }\r\n  },\r\n  extraReducers:{\r\n    [fetchPostsbyTopic.pending]:(state, action)=>{\r\n      state.isLoading = true;\r\n      state.hasError = false;\r\n    },\r\n    [fetchPostsbyTopic.fulfilled]:(state, action)=>{\r\n      state.posts = action.payload;\r\n      state.isLoading = false;\r\n      state.hasError = false;\r\n    },\r\n    [fetchPostsbyTopic.rejected]:(state, action)=>{\r\n      state.isLoading = false;\r\n      state.hasError = true;\r\n    }\r\n  }\r\n\r\n})\r\n\r\n\r\n// .selectedTopic state selector\r\nexport const selectSelectedTopic =(state)=>state.posts.selectedTopic;\r\nexport const selectFilteredSelectedTopic= (state) =>{\r\n  const selectedTopic = selectSelectedTopic(state);\r\n  return selectedTopic; \r\n}\r\n// .hasError state selector\r\nexport const selectHasError =(state)=>state.posts.hasError;\r\nexport const selectFilteredHasError =(state)=>{\r\n  const hasError = selectHasError(state);\r\n  return hasError;\r\n}\r\n\r\n// .searchTerm state selector\r\nexport const selectSearchTerm = (state) => state.posts.searchTerm;\r\nexport const selectFilteredSearchTerm= (state) =>{\r\n  const searchTerm = selectSearchTerm(state);\r\n  return searchTerm;\r\n}\r\n\r\n// .posts state selector\r\nexport const selectPosts = (state)=>state.posts.posts;\r\n\r\nexport const selectFilteredPosts = createSelector(\r\n  [selectPosts, selectSearchTerm],\r\n  (posts, searchTerm) => {\r\n    if (searchTerm !== '') {\r\n      return posts.filter((post) =>\r\n        post.title.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    }\r\n\r\n    return posts;\r\n  }\r\n);\r\n\r\n\r\n// export actions an reducer\r\nexport const {setSelectedTopic, setSearchTerm} = postsSlice.actions;\r\nexport default postsSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
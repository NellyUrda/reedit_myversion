{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\n// creem slice\n// creem asyncThunk action care ne da post pt subredit specific\nexport const fetchPostsbyTopic = createAsyncThunk('posts/getPostsbyTopic', async topic => {\n  const baseUrl = 'https://www.reddit.com';\n  try {\n    // topic va fi ce am ales eu apasand butonul\n    // imi va lua url asociat topicului: ex home: /r/Home/\n    const response = await fetch(`${baseUrl}${topic}.json`);\n    const jsonResponse = await response.json();\n    const posts = [];\n    posts = jsonResponse.data.childrean.map(post => post.data);\n    return posts;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const postsSlice = createSlice({\n  name: 'posts',\n  initialState: {\n    posts: [],\n    isLoading: false,\n    hasError: false,\n    selectedTopic: ''\n  },\n  reducers: {},\n  extraReducers: {\n    [fetchPostsbyTopic.pending]: (state, action) => {\n      state.isLoading = true;\n      state.hasError = false;\n    },\n    [fetchPostsbyTopic.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.hasError = false;\n      state.posts.push(action.payload);\n      state.selectedTopic = action.payload;\n    },\n    [fetchPostsbyTopic.rejected]: (state, action) => {\n      state.isLoading = false;\n      state.hasError = true;\n    }\n  }\n});\n\n// creem selectors ca apoi sa folosim state si action in componenta(Posts.js) \n// acolo vom folosi useSelector(), useDispatch()\nexport const selectPosts = state => state.posts.posts;\nexport const selectFilteredPosts = state => {\n  const posts = selectPosts(state);\n  return posts;\n};\nexport default postsSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","fetchPostsbyTopic","topic","baseUrl","response","fetch","jsonResponse","json","posts","data","childrean","map","post","error","console","log","postsSlice","name","initialState","isLoading","hasError","selectedTopic","reducers","extraReducers","pending","state","action","fulfilled","push","payload","rejected","selectPosts","selectFilteredPosts","reducer"],"sources":["C:/Users/urdan/reedit_myversion/src/features/postsSlice.js"],"sourcesContent":["import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\r\n\r\n// creem slice\r\n// creem asyncThunk action care ne da post pt subredit specific\r\nexport const fetchPostsbyTopic = createAsyncThunk(\r\n  'posts/getPostsbyTopic',\r\n  async(topic) =>{\r\n    const baseUrl = 'https://www.reddit.com';\r\n\r\n    try{\r\n      // topic va fi ce am ales eu apasand butonul\r\n      // imi va lua url asociat topicului: ex home: /r/Home/\r\n      const response = await fetch(`${baseUrl}${topic}.json`);\r\n      const jsonResponse = await response.json();\r\n\r\n      const posts = [];\r\n      posts = jsonResponse.data.childrean.map((post)=> post.data);\r\n      return posts;\r\n\r\n    }catch (error){\r\n      console.log(error);\r\n    }\r\n  }\r\n)\r\n\r\n\r\nexport const postsSlice = createSlice({\r\n  name: 'posts',\r\n  initialState:{\r\n    posts: [],\r\n    isLoading: false,\r\n    hasError: false,\r\n    selectedTopic: ''\r\n  },\r\n  reducers: {},\r\n  extraReducers:{\r\n    [fetchPostsbyTopic.pending]:(state, action)=>{\r\n      state.isLoading = true;\r\n      state.hasError = false;\r\n    },\r\n    [fetchPostsbyTopic.fulfilled]:(state, action)=>{\r\n      state.isLoading = false;\r\n      state.hasError = false;\r\n      state.posts.push(action.payload);\r\n      state.selectedTopic = action.payload\r\n    },\r\n    [fetchPostsbyTopic.rejected]:(state, action)=>{\r\n      state.isLoading = false;\r\n      state.hasError = true;\r\n    }\r\n  }\r\n\r\n})\r\n\r\n\r\n// creem selectors ca apoi sa folosim state si action in componenta(Posts.js) \r\n// acolo vom folosi useSelector(), useDispatch()\r\nexport const selectPosts = (state)=>state.posts.posts;\r\nexport const selectFilteredPosts = (state) =>{\r\n  const posts = selectPosts(state);\r\n  return posts;\r\n}\r\n\r\nexport default postsSlice.reducer;\r\n\r\n"],"mappings":"AAAA,SAAQA,gBAAgB,EAAEC,WAAW,QAAO,kBAAkB;;AAE9D;AACA;AACA,OAAO,MAAMC,iBAAiB,GAAGF,gBAAgB,CAC/C,uBAAuB,EACvB,MAAMG,KAAK,IAAI;EACb,MAAMC,OAAO,GAAG,wBAAwB;EAExC,IAAG;IACD;IACA;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEF,OAAQ,GAAED,KAAM,OAAM,CAAC;IACvD,MAAMI,YAAY,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAE1C,MAAMC,KAAK,GAAG,EAAE;IAChBA,KAAK,GAAGF,YAAY,CAACG,IAAI,CAACC,SAAS,CAACC,GAAG,CAAEC,IAAI,IAAIA,IAAI,CAACH,IAAI,CAAC;IAC3D,OAAOD,KAAK;EAEd,CAAC,QAAOK,KAAK,EAAC;IACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EACpB;AACF,CACF,CAAC;AAGD,OAAO,MAAMG,UAAU,GAAGhB,WAAW,CAAC;EACpCiB,IAAI,EAAE,OAAO;EACbC,YAAY,EAAC;IACXV,KAAK,EAAE,EAAE;IACTW,SAAS,EAAE,KAAK;IAChBC,QAAQ,EAAE,KAAK;IACfC,aAAa,EAAE;EACjB,CAAC;EACDC,QAAQ,EAAE,CAAC,CAAC;EACZC,aAAa,EAAC;IACZ,CAACtB,iBAAiB,CAACuB,OAAO,GAAE,CAACC,KAAK,EAAEC,MAAM,KAAG;MAC3CD,KAAK,CAACN,SAAS,GAAG,IAAI;MACtBM,KAAK,CAACL,QAAQ,GAAG,KAAK;IACxB,CAAC;IACD,CAACnB,iBAAiB,CAAC0B,SAAS,GAAE,CAACF,KAAK,EAAEC,MAAM,KAAG;MAC7CD,KAAK,CAACN,SAAS,GAAG,KAAK;MACvBM,KAAK,CAACL,QAAQ,GAAG,KAAK;MACtBK,KAAK,CAACjB,KAAK,CAACoB,IAAI,CAACF,MAAM,CAACG,OAAO,CAAC;MAChCJ,KAAK,CAACJ,aAAa,GAAGK,MAAM,CAACG,OAAO;IACtC,CAAC;IACD,CAAC5B,iBAAiB,CAAC6B,QAAQ,GAAE,CAACL,KAAK,EAAEC,MAAM,KAAG;MAC5CD,KAAK,CAACN,SAAS,GAAG,KAAK;MACvBM,KAAK,CAACL,QAAQ,GAAG,IAAI;IACvB;EACF;AAEF,CAAC,CAAC;;AAGF;AACA;AACA,OAAO,MAAMW,WAAW,GAAIN,KAAK,IAAGA,KAAK,CAACjB,KAAK,CAACA,KAAK;AACrD,OAAO,MAAMwB,mBAAmB,GAAIP,KAAK,IAAI;EAC3C,MAAMjB,KAAK,GAAGuB,WAAW,CAACN,KAAK,CAAC;EAChC,OAAOjB,KAAK;AACd,CAAC;AAED,eAAeQ,UAAU,CAACiB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}
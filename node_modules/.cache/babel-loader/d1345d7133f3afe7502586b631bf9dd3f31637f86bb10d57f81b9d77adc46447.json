{"ast":null,"code":"import _defineProperty from\"C:/Users/urdan/reedit_myversion/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/Users/urdan/reedit_myversion/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/urdan/reedit_myversion/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";// async thunk func that makes a request to www.reedit.com and returns a Js promise,\n// the topics\nexport var fetchTopics=createAsyncThunk('allTopics/fetchTopics',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var baseUrl,response,jsonResponse,topics;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:baseUrl='https://www.reddit.com';_context.prev=1;_context.next=4;return fetch(\"\".concat(baseUrl,\"/subreddits.json\"));case 4:response=_context.sent;if(!response.ok){_context.next=12;break;}_context.next=8;return response.json();case 8:jsonResponse=_context.sent;topics=[];topics=jsonResponse.data.children.map(function(subreddit){return subreddit.data;});return _context.abrupt(\"return\",topics);case 12:_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 17:case\"end\":return _context.stop();}},_callee,null,[[1,14]]);})));// the slice for the topics state\nexport var allTopicsSlice=createSlice({name:'allTopics',initialState:{topics:[],isLoading:false,hasError:false},reducers:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,fetchTopics.pending,function(state,action){state.isLoading=true;state.hasError=false;}),_defineProperty(_extraReducers,fetchTopics.fulfilled,function(state,action){state.topics=action.payload;state.isLoading=false;state.hasError=false;}),_defineProperty(_extraReducers,fetchTopics.rejected,function(state,action){state.isLoading=false;state.hasError=true;}),_extraReducers)});// selectors for .topics state\nexport var selectAllTopics=function selectAllTopics(state){return state.allTopics.topics;};export var selectFilteredAllTopics=function selectFilteredAllTopics(state){var topics=selectAllTopics(state);return topics;};export default allTopicsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","fetchTopics","_asyncToGenerator","_regeneratorRuntime","mark","_callee","baseUrl","response","jsonResponse","topics","wrap","_callee$","_context","prev","next","fetch","concat","sent","ok","json","data","children","map","subreddit","abrupt","t0","console","log","stop","allTopicsSlice","name","initialState","isLoading","hasError","reducers","extraReducers","_extraReducers","_defineProperty","pending","state","action","fulfilled","payload","rejected","selectAllTopics","allTopics","selectFilteredAllTopics","reducer"],"sources":["C:/Users/urdan/reedit_myversion/src/features/allTopicsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\n\r\n// async thunk func that makes a request to www.reedit.com and returns a Js promise,\r\n// the topics\r\nexport const fetchTopics = createAsyncThunk(\r\n    'allTopics/fetchTopics', \r\n    async () =>{\r\n         const baseUrl = 'https://www.reddit.com';\r\n\r\n         try{\r\n           const response = await fetch(`${baseUrl}/subreddits.json`);\r\n           if(response.ok){\r\n               const jsonResponse = await response.json();\r\n               \r\n               let topics = [];\r\n               topics = jsonResponse.data.children.map((subreddit) => subreddit.data);\r\n               return topics;\r\n               \r\n           }\r\n       \r\n         }catch(error){\r\n           console.log(error);\r\n         }\r\n    }\r\n       \r\n)\r\n\r\n// the slice for the topics state\r\nexport const allTopicsSlice = createSlice({\r\n    name: 'allTopics',\r\n    initialState:{\r\n        topics: [],\r\n        isLoading: false,\r\n        hasError: false\r\n    },\r\n    reducers: {},\r\n    extraReducers: {\r\n        [fetchTopics.pending]:(state, action) =>{\r\n            state.isLoading = true;\r\n            state.hasError = false;\r\n        },\r\n        [fetchTopics.fulfilled]:(state, action)=>{\r\n            state.topics= action.payload;\r\n            state.isLoading= false;\r\n            state.hasError = false;\r\n        },\r\n        [fetchTopics.rejected]:(state, action)=>{\r\n            state.isLoading = false;\r\n            state.hasError = true;\r\n        }\r\n\r\n    }\r\n\r\n});\r\n\r\n\r\n// selectors for .topics state\r\nexport const selectAllTopics =(state)=>state.allTopics.topics;\r\nexport const selectFilteredAllTopics =(state)=>{\r\n    const topics = selectAllTopics(state);\r\n    return topics;\r\n}\r\n\r\nexport default allTopicsSlice.reducer;"],"mappings":"oYAAA,OAASA,WAAW,CAAEC,gBAAgB,KAAQ,kBAAkB,CAGhE;AACA;AACA,MAAO,IAAM,CAAAC,WAAW,CAAGD,gBAAgB,CACvC,uBAAuB,cAAAE,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CACvB,SAAAC,QAAA,MAAAC,OAAA,CAAAC,QAAA,CAAAC,YAAA,CAAAC,MAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACWR,OAAO,CAAG,wBAAwB,CAAAM,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAGf,CAAAC,KAAK,IAAAC,MAAA,CAAIV,OAAO,oBAAkB,CAAC,QAApDC,QAAQ,CAAAK,QAAA,CAAAK,IAAA,KACXV,QAAQ,CAACW,EAAE,EAAAN,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,SACiB,CAAAP,QAAQ,CAACY,IAAI,CAAC,CAAC,QAApCX,YAAY,CAAAI,QAAA,CAAAK,IAAA,CAEdR,MAAM,CAAG,EAAE,CACfA,MAAM,CAAGD,YAAY,CAACY,IAAI,CAACC,QAAQ,CAACC,GAAG,CAAC,SAACC,SAAS,QAAK,CAAAA,SAAS,CAACH,IAAI,GAAC,CAAC,OAAAR,QAAA,CAAAY,MAAA,UAChEf,MAAM,UAAAG,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAa,EAAA,CAAAb,QAAA,aAKjBc,OAAO,CAACC,GAAG,CAAAf,QAAA,CAAAa,EAAM,CAAC,CAAC,yBAAAb,QAAA,CAAAgB,IAAA,MAAAvB,OAAA,iBAEzB,EAEL,CAAC,CAED;AACA,MAAO,IAAM,CAAAwB,cAAc,CAAG9B,WAAW,CAAC,CACtC+B,IAAI,CAAE,WAAW,CACjBC,YAAY,CAAC,CACTtB,MAAM,CAAE,EAAE,CACVuB,SAAS,CAAE,KAAK,CAChBC,QAAQ,CAAE,KACd,CAAC,CACDC,QAAQ,CAAE,CAAC,CAAC,CACZC,aAAa,EAAAC,cAAA,IAAAC,eAAA,CAAAD,cAAA,CACRnC,WAAW,CAACqC,OAAO,CAAE,SAACC,KAAK,CAAEC,MAAM,CAAI,CACpCD,KAAK,CAACP,SAAS,CAAG,IAAI,CACtBO,KAAK,CAACN,QAAQ,CAAG,KAAK,CAC1B,CAAC,EAAAI,eAAA,CAAAD,cAAA,CACAnC,WAAW,CAACwC,SAAS,CAAE,SAACF,KAAK,CAAEC,MAAM,CAAG,CACrCD,KAAK,CAAC9B,MAAM,CAAE+B,MAAM,CAACE,OAAO,CAC5BH,KAAK,CAACP,SAAS,CAAE,KAAK,CACtBO,KAAK,CAACN,QAAQ,CAAG,KAAK,CAC1B,CAAC,EAAAI,eAAA,CAAAD,cAAA,CACAnC,WAAW,CAAC0C,QAAQ,CAAE,SAACJ,KAAK,CAAEC,MAAM,CAAG,CACpCD,KAAK,CAACP,SAAS,CAAG,KAAK,CACvBO,KAAK,CAACN,QAAQ,CAAG,IAAI,CACzB,CAAC,EAAAG,cAAA,CAIT,CAAC,CAAC,CAGF;AACA,MAAO,IAAM,CAAAQ,eAAe,CAAE,QAAjB,CAAAA,eAAeA,CAAGL,KAAK,QAAG,CAAAA,KAAK,CAACM,SAAS,CAACpC,MAAM,GAC7D,MAAO,IAAM,CAAAqC,uBAAuB,CAAE,QAAzB,CAAAA,uBAAuBA,CAAGP,KAAK,CAAG,CAC3C,GAAM,CAAA9B,MAAM,CAAGmC,eAAe,CAACL,KAAK,CAAC,CACrC,MAAO,CAAA9B,MAAM,CACjB,CAAC,CAED,cAAe,CAAAoB,cAAc,CAACkB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}